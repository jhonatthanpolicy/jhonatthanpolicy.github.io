{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "title": {
    "text": "Fertility rate (births per woman) â€” Japan, China, Mexico",
    "subtitle": "World Bank API indicator: SP.DYN.TFRT.IN",
    "anchor": "start"
  },
  "data": {
    "url": "https://api.worldbank.org/v2/country/JPN;CHN;MEX/indicator/SP.DYN.TFRT.IN?format=json&per_page=20000",
    "format": { "type": "json", "property": "1" }
  },
  "transform": [
    { "filter": "datum.value != null" },
    { "calculate": "toDate(datum.date + '-01-01')", "as": "Year" }
  ],
  "mark": { "type": "line", "strokeWidth": 2 },
  "encoding": {
    "x": { "field": "Year", "type": "temporal", "title": "Year" },
    "y": { "field": "value", "type": "quantitative", "title": "Births per woman" },
    "color": { "field": "country.value", "type": "nominal", "title": "Country" },
    "tooltip": [
      { "field": "country.value", "type": "nominal", "title": "Country" },
      { "field": "Year", "type": "temporal", "format": "%Y", "title": "Year" },
      { "field": "value", "type": "quantitative", "format": ".2f", "title": "Fertility rate" }
    ]
  }
}
