{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "title": "Top 5 countries by fertility rate (scraped from Wikipedia)",
  "data": {
    "url": "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/cc5_fertility_scraped_tidy.csv",
    "format": { "type": "csv" }
  },
  "transform": [
    {
      "window": [
        { "op": "rank", "as": "rank" }
      ],
      "sort": [
        { "field": "fertility_rate", "order": "descending" }
      ]
    },
    {
      "filter": "datum.rank <= 5"
    }
  ],
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "fertility_rate",
      "type": "quantitative",
      "title": "Births per woman"
    },
    "y": {
      "field": "country",
      "type": "nominal",
      "sort": "-x",
      "title": ""
    },
    "tooltip": [
      { "field": "country", "type": "nominal" },
      { "field": "fertility_rate", "type": "quantitative", "format": ".2f" }
    ]
  }
}
