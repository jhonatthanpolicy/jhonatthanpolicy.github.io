{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "title": "Top 5 countries by fertility rate, 2023 (scraped from Wikipedia)",
  "data": {
    "url": "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Data/cc5_fertility_scraped_tidy%20(1).csv",
    "format": { "type": "csv" }
  },
  "transform": [
    { "filter": "datum.country != 'Country'" },
    { "filter": "datum.fertility_rate > 0 && datum.fertility_rate < 15" },
    {
      "window": [{ "op": "rank", "as": "rank" }],
      "sort": [{ "field": "fertility_rate", "order": "descending" }]
    },
    { "filter": "datum.rank <= 6" }
  ],
  "mark": { "type": "point", "size": 220 },
  "encoding": {
    "x": {
      "field": "fertility_rate",
      "type": "quantitative",
      "title": "Births per woman"
    },
    "y": {
      "field": "country",
      "type": "nominal",
      "sort": "-x",
      "title": ""
    },
    "tooltip": [
      { "field": "country", "type": "nominal" },
      {
        "field": "fertility_rate",
        "type": "quantitative",
        "format": ".2f",
        "title": "Fertility rate"
      }
    ]
  }
}


