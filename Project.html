<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Project | Demography Dashboard</title>

  <!-- Vega libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    :root{
      --maxw: 980px;
      --bg: #fbfbfb;
      --card: #ffffff;
      --border: #e6e6e6;
      --text: #111;
      --muted: #444;
      --radius: 14px;
      --shadow: 0 1px 10px rgba(0,0,0,0.04);
      --gap: 16px;
    }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.45;
      background: var(--bg);
      color: var(--text);
    }

    header, main, footer{
      max-width: var(--maxw);
      margin: 0 auto;
      padding: 22px;
    }

    h1{ margin: 0 0 6px; font-size: 2rem; }
    h2{ margin: 34px 0 10px; padding-top: 18px; border-top: 1px solid var(--border); }
    h3{ margin: 18px 0 10px; }

    .note{ color: var(--muted); font-size: .95rem; margin: 8px 0; }

    .card{
      background: #fafafa;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 12px 14px;
    }

    .stack{
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--gap);
      align-items: stretch;
      margin-top: 12px;
    }

    .chart-card{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 380px;
    }

    .chart-slot{
      flex: 1;
      min-height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .vega-embed{ width: 100% !important; }
    .vega-embed details{ display:none; }

    .meta{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 10px;
    }
    @media (max-width: 900px){
      .meta{ grid-template-columns: 1fr; }
    }

    code{
      background: #f1f1f1;
      padding: 2px 6px;
      border-radius: 6px;
    }

    a{ color: #0b57d0; }
  </style>
</head>

<body>
<header>
  <h1>Project — Demography & Birth Outcomes</h1>
  <p class="note">
  The project use six charts with World Bank data API and Our World in Data 
  </p>

  <div class="card">
    <p><b>Research question:</b> <span>Global demographic transition: declining births and fertility in the 21st century</span></p>
    <p><b>Data sources:</b> World Bank indicators + supporting datasets used in your coding challenges.</p>
  </div>
</header>

<main>
  <!-- SECTION 1: Context / Motivation -->
  <section id="context">
    <h2>1) Context: Global births over time</h2>
    <p class="note">
     This chart demonstrates the global trend of the Births per year since 1980.
    </p>

    <div class="stack">
      <div class="chart-card">
        <div class="chart-slot" id="chart_births_world"></div>
        <div class="card">
          <p><b>Key takeaway:</b> <span>The chart illustrates global births per year, showing a clear peak around 2012 followed by a sustained decline. By 2023, births had returned to levels comparable to those of 1983, indicating a significant demographic transition. This decline suggests long-term challenges related to ageing populations and demographic sustainability</span></p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 2: Comparison / Evidence -->
  <section id="comparison">
    <h2>2) Evidence: Comparing countries / outcomes</h2>
    <p class="note">
     This chart shows that Japan’s population peaks around 2010 and then begins a sustained decline. It supports the argument that prolonged low fertility eventually translates into population contraction, not just slower growth. Japan illustrates how demographic decline follows decades of below-replacement fertility.
    </p>

    <div class="stack">
      <div class="chart-card">
        <div class="chart-slot" id="chart_cc3_2"></div>
        <div class="card">
          <p><b>Key takeaway:</b> <span>Long-term low fertility leads to population decline: Japan’s population peaks in 2010 and falls steadily, foreshadowing demographic outcomes for other low-fertility countries.</span></p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 3: Interactivity (CC9) -->
  <section id="interactive">
    <h2>3) Interactive exploration</h2>
    <p class="note">
      These two charts explore long-run differences in demographic dynamics between high- and low-birth-rate countries.Together, the charts show that although birth and fertility rates decline globally, countries start from very different levels and do not converge at the same speed, highlighting persistent demographic inequality.
    </p>

    <div class="stack">
      <div class="chart-card">
        <div class="chart-slot" id="chart_cc9_1"></div>
        <div class="card">
          <p><b>How to use:</b> <span>Use the drop-down menu to switch between higher birth-rate and lower birth-rate country groups. This allows comparison of long-run trends and highlights convergence over time.</span></p>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-slot" id="chart_cc9_2"></div>
        <div class="card">
          <p><b>How to use:</b> <span>Use the drop-down menu to switch between high-fertility and low-fertility country groups. This allows comparison of long-run trends and highlights convergence over time.</span></p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 4: Advanced analytics (CC10.1) -->
  <section id="analytics">
    <h2>4) Advanced analytics</h2>
    <p class="note">
      This chart shows the distribution of fertility rates across all countries in 2022, highlighting how countries cluster at low, medium, and high fertility levels.
    </p>

    <div class="stack">
      <div class="chart-card">
        <div class="chart-slot" id="chart_cc10_1"></div>
        <div class="card">
          <p><b>Key takeaway:</b> <span>Most countries now cluster below replacement fertility (2.1), while a smaller group remains at very high fertility levels, revealing strong global demographic inequality.</span></p>
        </div>
      </div>
    </div>
  </section>

  <!-- SECTION 5: Machine learning (CC10.2) -->
  <section id="ml">
    <h2>5) Machine learning result</h2>
    <p class="note">
     K-means identifies clear clusters of low, medium, and high fertility countries, confirming that global fertility patterns are structurally segmented rather than continuous.
    </p>

    <div class="stack">
      <div class="chart-card">
        <div class="chart-slot" id="chart_cc10_2"></div>

        <div class="meta">
          <div class="card">
            <p><b>Hypothesis:</b><br><span>Countries naturally group into distinct fertility regimes, reflecting different stages of demographic transition rather than a single global fertility pattern</span></p>
          </div>
          <div class="card">
            <p><b>Finding:</b><br><span>Demographics are changing due to a multiplicity of factors, the majority of countries are grouped behind the 2 of fertility rate and impacting the replacement levels wich are above 2.1</span></p>
          </div>
        </div>

        <div class="card">
          <p class="note" style="margin:0;">
            <b>Reproducibility:</b> All data processing, clustering, and exports were done in a public Google Colab notebook using World Bank open data.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Optional: references -->
  <section id="refs">
    <h2>References</h2>
    <div class="card">
      <p class="note" style="margin:0;">
        <b>Charts embedded from RAW GitHub JSON specs.</b> If a chart fails, confirm the RAW link opens a JSON file in the browser.
      </p>
    </div>
  </section>
</main>

<footer>
  <p class="note">© <span id="year"></span> Jhonatthan Tibana</p>
</footer>

<script>
  function embedSpec(divId, rawUrl, opts = {}) {
    const el = document.getElementById(divId);
    if (!rawUrl) {
      el.innerHTML = "<p class='note'>Missing RAW link for <code>" + divId + "</code></p>";
      return;
    }
    vegaEmbed("#" + divId, rawUrl, {
      actions: { export: true, source: true, compiled: false, editor: true },
      renderer: "canvas",
      ...opts
    }).catch(err => {
      console.error("Embed failed:", divId, err);
      el.innerHTML = "<p class='note'>Embed failed. Check console + RAW link.</p>";
    });
  }

  // ===== Your 6 project charts (RAW links) =====
  const links = {
    births_world: "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Graphs/Birthsperyear1970.json",
    cc3_2:        "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Graphs/Challenge3.2.json",
    cc9_1:        "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Graphs/Challenge9.1.json",
    cc9_2:        "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Graphs/Challenge9.2.json",
    cc10_1:       "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Graphs/Challenge10.1.json",
    cc10_2:       "https://raw.githubusercontent.com/jhonatthanpolicy/jhonatthanpolicy.github.io/refs/heads/main/Graphs/Challenge10.2.json"
  };

  // ===== Embed charts (stacked vertically) =====
  embedSpec("chart_births_world", links.births_world);
  embedSpec("chart_cc3_2", links.cc3_2);
  embedSpec("chart_cc9_1", links.cc9_1);
  embedSpec("chart_cc9_2", links.cc9_2);
  embedSpec("chart_cc10_1", links.cc10_1);
  embedSpec("chart_cc10_2", links.cc10_2);

  document.getElementById("year").textContent = new Date().getFullYear();
</script>
</body>
</html>

